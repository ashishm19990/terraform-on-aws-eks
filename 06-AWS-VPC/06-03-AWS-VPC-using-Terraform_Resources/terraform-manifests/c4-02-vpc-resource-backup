resource "aws_vpc" "vpc" {
  cidr_block       = "10.0.0.0/16"
  instance_tenancy = "default"

  tags = merge(
    local.common_tags,
    {
      Name = "${local.name}-vpc"
    }
  )
}

resource "aws_subnet" "public_subnet" {
  vpc_id            = aws_vpc.vpc.id
  for_each          = toset(var.vpc_public_subnets)
  cidr_block        = each.key
  availability_zone = each.key

  tags = merge(
    local.common_tags,
    {
      Name = "${local.name}-public-subnet-${each.key}"
    }
  )
}